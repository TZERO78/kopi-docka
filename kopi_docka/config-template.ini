# Kopi-Docka Configuration Template
# 
# This is a template configuration file for Kopi-Docka.
# Copy this file and modify it according to your needs.
# 
# Default locations:
#   - System-wide (root): /etc/kopi-docka.conf
#   - User: ~/.config/kopi-docker/config.conf

[kopia]
# Path where Kopia repository will be stored
# Can also be cloud storage like s3://bucket, b2://bucket, azure://container
# See: kopia repository create --help
repository_path = /backup/kopia-repository

# Repository password (will be auto-generated on first run if not set)
# IMPORTANT: Keep this password safe! You'll need it to restore backups.
password = CHANGE_ME_TO_A_SECURE_PASSWORD

# Compression algorithm (zstd, gzip, s2, or none)
# Kopia handles this automatically
compression = zstd

# Encryption algorithm (handled by Kopia)
encryption = AES256-GCM-HMAC-SHA256

# Cache directory for Kopia
cache_directory = /var/cache/kopi-docka

# Kopia native scheduling (optional)
# If enabled, use 'kopia policy set' and 'kopia schedule'
# instead of cron/systemd timers
use_kopia_scheduler = false

[backup]
# Base path for temporary backup operations
base_path = /backup/kopi-docka

# Number of parallel workers for backup operations
# Set to 'auto' to automatically determine based on system resources
# Or specify a number (e.g., 4)
parallel_workers = auto

# Timeout in seconds for stopping containers
stop_timeout = 30

# Timeout in seconds for starting containers
start_timeout = 60

# Enable database backup using native dump tools
database_backup = true

# Disaster recovery bundle settings
# Automatically update recovery bundle after successful backups
update_recovery_bundle = false

# Where to store recovery bundles
recovery_bundle_path = /backup/recovery

# How many recovery bundles to keep (rotation)
recovery_bundle_retention = 3

[docker]
# Path to Docker socket
socket = /var/run/docker.sock

# Timeout for docker-compose operations
compose_timeout = 300

# Remove stopped containers before backup
prune_stopped_containers = false

[logging]
# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
level = INFO

# Log file path
file = /var/log/kopi-docka.log

# Maximum log file size in MB
max_size_mb = 100

# Number of backup log files to keep
backup_count = 5